########################################
# Basic settings
########################################

bind 0.0.0.0
port 6379
protected-mode yes

# Require password in production (change this!)
requirepass YOUR_STRONG_REDIS_PASSWORD_HERE

# Number of logical databases (default)
databases 16

########################################
# Persistence
########################################

# RDB snapshots (reasonable defaults)
save 900 1
save 300 10
save 60 10000

# If a BGSAVE fails, do we stop all writes?
# For production reliability of Bull queues/sessions, it's often better to
# KEEP accepting writes and fix persistence separately:
stop-writes-on-bgsave-error no

# AOF: safer persistence, but more I/O. For your use case it's optional.
appendonly yes
appendfsync everysec   # good balance between durability & performance

########################################
# Memory management
########################################

# Optional: limit max memory (example: 512MB). Tune based on your server.
# maxmemory 512mb

# For caches/queues, use an eviction policy:
# - volatile-lru: evict keys with TTL set, least recently used first
# - allkeys-lru: evict any keys if out of memory
# Uncomment ONE of these if you set maxmemory.
# maxmemory-policy volatile-lru

########################################
# Logging
########################################

logfile ""          # log to stdout (Docker best practice)
loglevel notice     # or 'warning' in production

########################################
# Other sane defaults (keeping Redis defaults mostly)
########################################

tcp-keepalive 300